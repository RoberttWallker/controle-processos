<!-- login.html -->
{% extends "frontend_site/base/base.html" %}

{% block main_class %}sem-layout{% endblock %}

{% load static %}

{% block title %}Recuperação de Senha{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/auth/registration.css' %}">
{% endblock %}

{% block header %}

{% endblock %}

{% block lateral_bar %}

{% endblock %}

{% block content %}
    <div class="caixa" id="caixa_reset_password">
        <div class="container">
            <h2>Recuperar sua Senha</h2>
            <form action="{% url 'password_reset' %}" method="POST">
                {% csrf_token %}
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required>
                <p>Se esse email estiver cadastrado, enviaremos o link para redefinir a senha.</p>
                <button type="submit">Enviar</button>
            </form>
        </div>

        {% if messages %}
            <ul class="lista_mensagens">
                {% for message in messages %}
                    <li class="message {{message.tags}}">{{ message }}</li>

                    {% if 'success' in message.tags %}
                        <!-- Script para redirecionar após um pequeno atraso -->
                        <script type="text/javascript">
                            setTimeout(function() {
                                window.location.href = "{% url 'admin_panel' %}";  // Redireciona para a página 'home' após o atraso
                            }, 2000);  // 2 segundos de espera
                        </script>
                    {% endif %}
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% endblock %}